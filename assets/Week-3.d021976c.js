import{M as _,o as l,g as i,h as t,F as g,x as y,q as c,v as a,k as h,z as P,t as u,y as f,A as k}from"./vendor.ba540e03.js";import{_ as U,s as m,r as p,a as M,b}from"./index.c36ad0ba.js";const x={data(){return{product:{category:"",content:"",description:"",id:"",imageUrl:"",imagesUrl:[],is_enabled:0,origin_price:0,price:0,title:"",unit:"",num:1},products:[],pagination:{},selectedProductId:"",action:"",isLoading:!0,productModal:null,delProductModal:null,resultProductModal:null,message:"",success:!1}},watch:{selectedProductId(){if(this.selectedProductId===""){this.product={category:"",content:"",description:"",id:"",imageUrl:"",imagesUrl:[],is_enabled:0,origin_price:0,price:0,title:"",unit:"",num:1};return}this.product=this.products.find(d=>d.id===this.selectedProductId)}},mounted(){if(!m.state.isLogin){p.push("/login");return}this.productModal=new _(document.getElementById("productModal"),{keyboard:!1,backdrop:"static"}),this.delProductModal=new _(document.getElementById("delProductModal"),{keyboard:!1,backdrop:"static"}),this.resultProductModal=new _(document.getElementById("resultProductModal"),{keyboard:!1,backdrop:"static"}),M.check().then(d=>{d.data.success&&this.getProducts()}).catch(d=>{const s=d.response.data;this.message=s.message,this.success=s.success,m.commit("logout"),p.push("/login")})},methods:{setProductId(d,s){switch(this.selectedProductId=d,this.action=s,s){case"add":case"edit":this.productModal.show();break;case"del":this.delProductModal.show();break}},getProducts(){this.isLoading=!0,b.getProducts().then(d=>{const s=d.data;this.products=s.products,this.pagination=s.pagination,this.isLoading=!1}).catch(d=>{const s=d.response.data;this.message=s.message,this.success=s.success,m.commit("logout"),p.push("/login")})},addProduct(){this.isLoading=!0,b.addProduct(this.product).then(d=>{const s=d.data;this.message=s.message,this.success=s.success,this.getProducts()}).catch(d=>{const s=d.response.data;this.message=s.message,this.success=s.success,m.commit("logout"),p.push("/login"),this.getProducts()})},updateProduct(){this.isLoading=!0,b.updateProduct(this.selectedProductId,this.product).then(d=>{const s=d.data;this.products=s.products,this.pagination=s.pagination,this.message=s.message,this.success=s.success,this.getProducts()}).catch(d=>{const s=d.response.data;this.message=s.message,this.success=s.success,m.commit("logout"),p.push("/login")})},deleteProduct(){this.isLoading=!0,b.deleteProduct(this.selectedProductId).then(d=>{const s=d.data;this.products=s.products,this.pagination=s.pagination,this.message=s.message,this.success=s.success,this.getProducts()}).catch(d=>{const s=d.response.data;this.message=s.message,this.success=s.success,m.commit("logout"),p.push("/login")})}}},w={class:"container"},C={class:"text-end mt-4"},L=["disabled"],I={class:"table mt-4"},V=t("thead",null,[t("tr",null,[t("th",{width:"120"}," \u5206\u985E "),t("th",null,"\u7522\u54C1\u540D\u7A31"),t("th",{width:"120"}," \u539F\u50F9 "),t("th",{width:"120"}," \u552E\u50F9 "),t("th",{width:"100"}," \u662F\u5426\u555F\u7528 "),t("th",{width:"120"}," \u7DE8\u8F2F ")])],-1),B={class:"btn-group"},E=["onClick"],A=["onClick"],N={id:"productModal",ref:"productModal",class:"modal fade",tabindex:"-1","aria-labelledby":"productModalLabel","aria-hidden":"true"},j={class:"modal-dialog modal-xl"},z={class:"modal-content border-0"},D=t("div",{class:"modal-header bg-dark text-white"},[t("h5",{id:"productModalLabel",class:"modal-title"},[t("span",null,"\u65B0\u589E\u7522\u54C1")]),t("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1),F={class:"modal-body"},S={class:"row"},q={class:"col-sm-4"},T={class:"mb-2"},W={class:"mb-3"},G=t("label",{for:"imageUrl",class:"form-label"}," \u8F38\u5165\u4E3B\u5716\u7DB2\u5740 ",-1),H=["src"],J={key:0,class:"mb-3"},K=t("hr",null,null,-1),O={class:"mb-3"},Q=t("label",{for:"imageUrl",class:"form-label"}," \u8F38\u5165\u5176\u4ED6\u5716\u7247\u7DB2\u5740 ",-1),R=["onUpdate:modelValue"],X=["src"],Y={key:0},Z={key:1},$={class:"col-sm-8"},tt={class:"mb-3"},st=t("label",{for:"title",class:"form-label"}," \u6A19\u984C ",-1),et={class:"row"},ot={class:"mb-3 col-md-6"},dt=t("label",{for:"category",class:"form-label"}," \u5206\u985E ",-1),lt={class:"mb-3 col-md-6"},it=t("label",{for:"price",class:"form-label"}," \u55AE\u4F4D ",-1),ct={class:"row"},at={class:"mb-3 col-md-6"},nt=t("label",{for:"origin_price",class:"form-label"}," \u539F\u50F9 ",-1),rt={class:"mb-3 col-md-6"},ut=t("label",{for:"price",class:"form-label"}," \u552E\u50F9 ",-1),mt=t("hr",null,null,-1),pt={class:"mb-3"},ht=t("label",{for:"description",class:"form-label"}," \u7522\u54C1\u63CF\u8FF0 ",-1),bt={class:"mb-3"},_t=t("label",{for:"content",class:"form-label"}," \u8AAA\u660E\u5167\u5BB9 ",-1),gt={class:"mb-3"},yt={class:"form-check"},ft=["checked"],vt=t("label",{class:"form-check-label",for:"is_enabled"}," \u662F\u5426\u555F\u7528 ",-1),Pt={class:"modal-footer"},kt=t("button",{type:"button",class:"btn btn-outline-secondary","data-bs-dismiss":"modal"}," \u53D6\u6D88 ",-1),Ut={id:"delProductModal",ref:"delProductModal",class:"modal fade",tabindex:"-1","aria-labelledby":"delProductModalLabel","aria-hidden":"true"},Mt={class:"modal-dialog"},xt={class:"modal-content border-0"},wt=k('<div class="modal-header bg-danger text-white"><h5 id="delProductModalLabel" class="modal-title"><span>\u522A\u9664\u7522\u54C1</span></h5><button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button></div><div class="modal-body"> \u662F\u5426\u522A\u9664\uFF1F <strong class="text-danger"> \u5546\u54C1(\u522A\u9664\u5F8C\u5C07\u7121\u6CD5\u6062\u5FA9)\u3002 </strong></div>',2),Ct={class:"modal-footer"},Lt=t("button",{type:"button",class:"btn btn-outline-secondary","data-bs-dismiss":"modal"}," \u53D6\u6D88 ",-1),It={id:"resultProductModal",ref:"resultProductModal",class:"modal fade",tabindex:"-1","aria-labelledby":"resultProductModalLabel","aria-hidden":"true"},Vt={class:"modal-dialog"},Bt={class:"modal-content border-0"},Et=t("div",{class:"modal-header bg-success text-white"},[t("h5",{id:"resultProductModalLabel",class:"modal-title"},[t("span",null,"\u7D50\u679C")]),t("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1),At={class:"modal-body"},Nt={class:"modal-footer"};function jt(d,s,zt,Dt,e,n){return l(),i(g,null,[t("div",w,[t("div",C,[t("button",{class:"btn btn-primary",disabled:e.isLoading,onClick:s[0]||(s[0]=o=>n.setProductId("","add"))}," \u5EFA\u7ACB\u65B0\u7684\u7522\u54C1 ",8,L)]),t("table",I,[V,t("tbody",null,[(l(!0),i(g,null,y(e.products,o=>(l(),i("tr",{key:o.id},[t("td",null,u(o.category),1),t("td",null,u(o.title),1),t("td",null,u(o.origin_price),1),t("td",null,u(o.price),1),t("td",null,[t("span",{class:f([o.is_enabled?"text-success":"text-secondary"])},u(o.is_enabled?"\u555F\u7528":"\u672A\u555F\u7528"),3)]),t("td",null,[t("div",B,[t("button",{type:"button",class:"btn btn-outline-primary btn-sm",onClick:r=>n.setProductId(o.id,"edit")}," \u7DE8\u8F2F ",8,E),t("button",{type:"button",class:"btn btn-outline-danger btn-sm",onClick:r=>n.setProductId(o.id,"del")}," \u522A\u9664 ",8,A)])])]))),128))])])]),t("div",N,[t("div",j,[t("div",z,[D,t("div",F,[t("div",S,[t("div",q,[t("div",T,[t("div",W,[G,c(t("input",{"onUpdate:modelValue":s[1]||(s[1]=o=>e.product.imageUrl=o),type:"text",class:"form-control",placeholder:"\u8F38\u5165\u4E3B\u5716\u7DB2\u5740"},null,512),[[a,e.product.imageUrl]]),e.product.imageUrl!==""?(l(),i("img",{key:0,class:"img-fluid mt-1",src:e.product.imageUrl,alt:"primary pic"},null,8,H)):h("",!0)]),Array.isArray(e.product.imagesUrl)?(l(),i("div",J,[K,t("div",O,[Q,(l(!0),i(g,null,y(e.product.imagesUrl,(o,r)=>(l(),i("div",{key:"pic-"+r,class:"mb-3"},[c(t("input",{"onUpdate:modelValue":v=>e.product.imagesUrl[r]=v,type:"text",class:"form-control",placeholder:"\u8F38\u5165\u5176\u4ED6\u5716\u7247\u7DB2\u5740"},null,8,R),[[a,e.product.imagesUrl[r]]]),e.product.imagesUrl[r]!==""?(l(),i("img",{key:0,class:"img-fluid mt-1",src:e.product.imagesUrl[r],alt:"other pic"},null,8,X)):h("",!0)]))),128))]),!e.product.imagesUrl.length||e.product.imagesUrl[e.product.imagesUrl.length-1]?(l(),i("div",Y,[t("button",{type:"button",class:"btn btn-primary btn-sm d-block w-100",onClick:s[2]||(s[2]=o=>e.product.imagesUrl.push(""))}," \u65B0\u589E\u5716\u7247 ")])):(l(),i("div",Z,[t("button",{type:"button",class:"btn btn-outline-danger btn-sm d-block w-100",onClick:s[3]||(s[3]=o=>e.product.imagesUrl.pop())}," \u522A\u9664\u5716\u7247 ")]))])):h("",!0)])]),t("div",$,[t("div",tt,[st,c(t("input",{id:"title","onUpdate:modelValue":s[4]||(s[4]=o=>e.product.title=o),type:"text",class:"form-control",placeholder:"\u8ACB\u8F38\u5165\u6A19\u984C"},null,512),[[a,e.product.title]])]),t("div",et,[t("div",ot,[dt,c(t("input",{id:"category","onUpdate:modelValue":s[5]||(s[5]=o=>e.product.category=o),type:"text",class:"form-control",placeholder:"\u8ACB\u8F38\u5165\u5206\u985E"},null,512),[[a,e.product.category]])]),t("div",lt,[it,c(t("input",{id:"unit","onUpdate:modelValue":s[6]||(s[6]=o=>e.product.unit=o),type:"text",class:"form-control",placeholder:"\u8ACB\u8F38\u5165\u55AE\u4F4D"},null,512),[[a,e.product.unit]])])]),t("div",ct,[t("div",at,[nt,c(t("input",{id:"origin_price","onUpdate:modelValue":s[7]||(s[7]=o=>e.product.origin_price=o),type:"number",min:"0",class:"form-control",placeholder:"\u8ACB\u8F38\u5165\u539F\u50F9"},null,512),[[a,e.product.origin_price]])]),t("div",rt,[ut,c(t("input",{id:"price","onUpdate:modelValue":s[8]||(s[8]=o=>e.product.price=o),type:"number",min:"0",class:"form-control",placeholder:"\u8ACB\u8F38\u5165\u552E\u50F9"},null,512),[[a,e.product.price]])])]),mt,t("div",pt,[ht,c(t("textarea",{id:"description","onUpdate:modelValue":s[9]||(s[9]=o=>e.product.description=o),type:"text",class:"form-control",placeholder:"\u8ACB\u8F38\u5165\u7522\u54C1\u63CF\u8FF0"},null,512),[[a,e.product.description]])]),t("div",bt,[_t,c(t("textarea",{id:"description","onUpdate:modelValue":s[10]||(s[10]=o=>e.product.content=o),type:"text",class:"form-control",placeholder:"\u8ACB\u8F38\u5165\u8AAA\u660E\u5167\u5BB9"},null,512),[[a,e.product.content]])]),t("div",gt,[t("div",yt,[c(t("input",{id:"is_enabled","onUpdate:modelValue":s[11]||(s[11]=o=>e.product.is_enabled=o),class:"form-check-input",type:"checkbox",checked:e.product.is_enabled},null,8,ft),[[P,e.product.is_enabled]]),vt])])])])]),t("div",Pt,[kt,t("button",{type:"button",class:"btn btn-primary","data-bs-dismiss":"modal",onClick:s[12]||(s[12]=o=>e.action==="add"?n.addProduct():n.updateProduct())}," \u78BA\u8A8D ")])])])],512),t("div",Ut,[t("div",Mt,[t("div",xt,[wt,t("div",Ct,[Lt,t("button",{type:"button",class:"btn btn-danger","data-bs-dismiss":"modal",onClick:s[13]||(s[13]=(...o)=>n.deleteProduct&&n.deleteProduct(...o))}," \u78BA\u8A8D\u522A\u9664 ")])])])],512),t("div",It,[t("div",Vt,[t("div",Bt,[Et,t("div",At,u(e.message),1),t("div",Nt,[e.success?(l(),i("button",{key:0,type:"button",class:f(["btn",[e.success?"btn-outline-seccess":"btn-outline-danger"]]),"data-bs-dismiss":"modal"}," \u5B8C\u6210 ",2)):h("",!0)])])])],512)],64)}var qt=U(x,[["render",jt]]);export{qt as default};
