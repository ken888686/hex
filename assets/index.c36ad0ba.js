import{c as O,a as S,b as u,d as l,e as C,f as N,M as W,r as k,o as _,g as w,h as a,i as p,w as m,j as R,k as y,t as T,F as L,l as f,m as A}from"./vendor.ba540e03.js";const M=function(){const o=document.createElement("link").relList;if(o&&o.supports&&o.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))n(e);new MutationObserver(e=>{for(const r of e)if(r.type==="childList")for(const i of r.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&n(i)}).observe(document,{childList:!0,subtree:!0});function s(e){const r={};return e.integrity&&(r.integrity=e.integrity),e.referrerpolicy&&(r.referrerPolicy=e.referrerpolicy),e.crossorigin==="use-credentials"?r.credentials="include":e.crossorigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function n(e){if(e.ep)return;e.ep=!0;const r=s(e);fetch(e.href,r)}};M();const b=O({plugins:[S({storage:window.localStorage})],state(){return{isLogin:u.get("isLogin"),token:u.get("token")}},mutations:{login(t){t.isLogin=!0,u.set("isLogin",!0)},logout(t){t.isLogin=!1,u.set("isLogin",!1),u.set("token","")},updateToken(t,o){t.token=o,u.set("token",o)}},actions:{login({commit:t},o){t("login"),t("updateToken",o)},logout({commit:t}){t("logout"),t("updateToken","")}}}),c="https://vue3-course-api.hexschool.io",v="ken888686",d={headers:{authorization:b.state.token}},V={login(t,o){return new Promise((s,n)=>{l.post(`${c}/v2/admin/signin`,{username:t,password:o}).then(e=>{d.headers.authorization=e.data.token,s(e)}).catch(e=>{n(e)})})},logout(){return new Promise((t,o)=>{l.post(`${c}/v2/logout`,{},d).then(s=>{t(s)}).catch(s=>{o(s)})})},check(){return new Promise((t,o)=>{l.post(`${c}/v2/api/user/check`,{},d).then(s=>{t(s)}).catch(s=>{o(s)})})}},he={getProducts(t=1,o=""){return new Promise((s,n)=>{l.get(`${c}/v2/api/${v}/admin/products?page=${t}&category=${o}`,d).then(e=>{s(e)}).catch(e=>{n(e)})})},addProduct(t){return new Promise((o,s)=>{l.post(`${c}/v2/api/${v}/admin/product`,{data:t},d).then(n=>{o(n)}).catch(n=>{s(n)})})},deleteProduct(t){return new Promise((o,s)=>{l.delete(`${c}/v2/api/${v}/admin/product/${t}`,d).then(n=>{o(n)}).catch(n=>{s(n)})})},updateProduct(t,o){return new Promise((s,n)=>{l.put(`${c}/v2/api/${v}/admin/product/${t}`,{data:o},d).then(e=>{s(e)}).catch(e=>{n(e)})})}},j="modulepreload",P={},D="/hex/",h=function(o,s){return!s||s.length===0?o():Promise.all(s.map(n=>{if(n=`${D}${n}`,n in P)return;P[n]=!0;const e=n.endsWith(".css"),r=e?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${n}"]${r}`))return;const i=document.createElement("link");if(i.rel=e?"stylesheet":j,e||(i.as="script",i.crossOrigin=""),i.href=n,document.head.appendChild(i),e)return new Promise((g,E)=>{i.addEventListener("load",g),i.addEventListener("error",E)})})).then(()=>o())},I=[{path:"/",name:"Home",component:()=>h(()=>import("./Home.f9676583.js"),["assets/Home.f9676583.js","assets/vendor.ba540e03.js"])},{path:"/login",name:"Login",component:()=>h(()=>import("./Login.f8f88d5b.js"),["assets/Login.f8f88d5b.js","assets/Login.7515de85.css","assets/vendor.ba540e03.js"])},{path:"/week-1",name:"Week 1",component:()=>h(()=>import("./Week-1.01fc6a19.js"),["assets/Week-1.01fc6a19.js","assets/Week-1.1ac72454.css","assets/vendor.ba540e03.js"])},{path:"/week-2",name:"Week 2",component:()=>h(()=>import("./Week-2.874ad74a.js"),["assets/Week-2.874ad74a.js","assets/vendor.ba540e03.js"])},{path:"/week-3",name:"Week 3",component:()=>h(()=>import("./Week-3.d021976c.js"),["assets/Week-3.d021976c.js","assets/vendor.ba540e03.js"])}],$=C({history:N("/hex/"),linkActiveClass:"active",routes:I});var z="/hex/assets/logo.03d6d6da.png",x=(t,o)=>{const s=t.__vccOpts||t;for(const[n,e]of o)s[n]=e;return s};const B={name:"Navbar",data(){return{logoSize:25,isProcessing:!1,message:"",logoutModal:null}},computed:{isLogin(){return b.state.isLogin}},mounted(){this.logoutModal=new W(document.getElementById("logoutModal"))},methods:{logout(){this.isProcessing=!0,V.logout().then(t=>{const o=t.data;this.logoutResult(!0,o.message)}).catch(t=>{this.logoutResult(!1,t.response.data.message)}).finally(()=>{this.isProcessing=!1})},logoutResult(t,o){this.message=o,this.logoutModal.toggle(),t&&(b.dispatch("logout"),$.push("/"))}}},H={class:"navbar navbar-expand-lg navbar-light bg-light"},F={class:"container"},q=["width","height"],K=a("button",{class:"navbar-toggler",type:"button","data-bs-toggle":"collapse","data-bs-target":"#navbarSupportedContent","aria-controls":"navbarSupportedContent","aria-expanded":"false","aria-label":"Toggle navigation"},[a("span",{class:"navbar-toggler-icon"})],-1),G={id:"navbarSupportedContent",class:"collapse navbar-collapse"},J={class:"navbar-nav me-auto mb-2 mb-lg-0"},Q={class:"nav-item dropdown"},U=a("a",{id:"navbarDropdown",class:"nav-link dropdown-toggle fw-bold",href:"#",role:"button","data-bs-toggle":"dropdown","aria-expanded":"false"}," \u6BCF\u9031\u4EFB\u52D9 ",-1),X={class:"dropdown-menu","aria-labelledby":"navbarDropdown"},Y=f(" Week 1 "),Z=f(" Week 2 "),ee=f(" Week 3 "),te=f(" \u767B\u5165 "),oe=["disabled"],se={id:"logoutModal",class:"modal fade",tabindex:"-1","aria-hidden":"true","aria-labelledby":"logoutModalLabel"},ne={class:"modal-dialog"},ae={class:"modal-content"},re=a("div",{class:"modal-header"},[a("h5",{id:"logoutModalLabel",class:"modal-title"}," Hexschool "),a("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1),ie={class:"modal-body"},le=a("div",{class:"modal-footer justify-content-center"},[a("button",{type:"button",class:"btn btn-primary","data-bs-dismiss":"modal"}," OK ")],-1);function ce(t,o,s,n,e,r){const i=k("router-link");return _(),w(L,null,[a("nav",H,[a("div",F,[p(i,{class:"navbar-brand",to:"/"},{default:m(()=>[a("img",{src:z,alt:"logo",width:e.logoSize,height:e.logoSize},null,8,q)]),_:1}),K,a("div",G,[a("ul",J,[a("li",Q,[U,a("ul",X,[a("li",null,[p(i,{class:"dropdown-item",to:"/week-1"},{default:m(()=>[Y]),_:1})]),a("li",null,[p(i,{class:"dropdown-item",to:"/week-2"},{default:m(()=>[Z]),_:1})]),a("li",null,[p(i,{class:"dropdown-item",to:"/week-3"},{default:m(()=>[ee]),_:1})])])])])]),r.isLogin?y("",!0):(_(),R(i,{key:0,to:"/login",type:"button",class:"btn btn-primary"},{default:m(()=>[te]),_:1})),r.isLogin?(_(),w("button",{key:1,type:"button",class:"btn btn-outline-primary",disabled:e.isProcessing,onClick:o[0]||(o[0]=(...g)=>r.logout&&r.logout(...g))}," \u767B\u51FA ",8,oe)):y("",!0)])]),a("div",se,[a("div",ne,[a("div",ae,[re,a("div",ie,[a("p",null,T(e.message),1)]),le])])])],64)}var de=x(B,[["render",ce]]);const ue={components:{Navbar:de}};function pe(t,o,s,n,e,r){const i=k("Navbar"),g=k("router-view");return _(),w(L,null,[p(i),p(g)],64)}var ge=x(ue,[["render",pe]]);A(ge).use($).use(b).mount("#app");export{x as _,V as a,he as b,$ as r,b as s};
